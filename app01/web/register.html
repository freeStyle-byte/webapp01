<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>注册</title>
        <style type="text/css">
            span{
                color: red;
                font-size: 12px;
            }
        </style>
    </head>
    <body>
    <script type="text/javascript">
        window.onload = function(){

            var usernameErrorSpan = document.getElementById("usernameError");
            var usernameElem = document.getElementById("username");
            usernameElem.onblur = function(){
                //alert("OK");
                var username = usernameElem.value;
                //去除前后空白
                username = username.trim();
                //判断用户名是否为空
                //如果为空则判定为false
                //alert(Boolean(username));
                if (username == ""){
                    //alert("NO");
                    usernameErrorSpan.innerText = "用户名不能为空！";
                }else if (username.length < 6 || username.length > 14){
                    usernameErrorSpan.innerText = "长度必须在[6~14]之间！";
                }else {
                    //alert("OK");
                    var re = /^[A-Za-z0-9]+$/;
                    if (re.test(username)){
                        //alert("OK");
                    }else{
                        usernameErrorSpan.innerText = "用户名只能由数字字母组成！";
                    }
                }
            }
            usernameElem.onfocus = function(){
                if (usernameErrorSpan.innerText != ""){
                    usernameElem.value = "";
                }
                usernameErrorSpan.innerText = "";
            }

            var userpwdErrorSpan = document.getElementById("userpwdError");
            var passwordElem = document.getElementById("password");
            var userpwdElem = document.getElementById("userpwd");
            passwordElem.onblur = function() {
                //alert("OK");
                var password = userpwdElem.value;
                //alert(password);
                if (passwordElem.value == ""){
                    //alert("no");
                    userpwdErrorSpan.innerText = "确认密码不能为空！"
                }else if (password != passwordElem.value){
                    userpwdErrorSpan.innerText = "确认密码与密码不匹配！"
                }else {

                }
            }

            passwordElem.onfocus = function() {

                if (userpwdErrorSpan.innerText != ""){
                    passwordElem.value = "";
                }
                userpwdErrorSpan.innerText = "";

            }

            var buttonElem = document.getElementById("btn01");
            buttonElem.onclick = function () {
                if (usernameErrorSpan.innerText == "" && userpwdErrorSpan.innerText == "") {
                    var formElem = document.getElementById("form");
                    formElem.submit();
                }
            }
        }
    </script>
    <center>
        <form action="http://localhost:8080/app01/user/add" id="form" method="get">
            <table>
                <tr>
                    <td>用户名:</td>
                    <td><input type="text" name="username" id="username" /></td>
                    <td><span id="usernameError"></span><td>
                </tr>
                <tr>
                    <td>密码:</td>
                    <td><input type="password" name="userpwd" id="userpwd" /></td>
                </tr>
                <tr>
                    <td>确认密码:</td>
                    <td><input type='password' id='password' /></td>
                    <td><span id="userpwdError"></span><td>
                </tr>
                <tr>
                    <td>用户性别:</td>
                    <td>
                    男<input type="radio" name="gender" value="男" />&nbsp&nbsp
                    女<input type="radio" name="gender" value="女" />
                    </td>
                </tr>
                <tr>
                    <td>邮箱:</td>
                    <td><input type='text' name='email' id='email' /></td>
                    <td><span id="emailError"></span><td>
                </tr>
                <tr>
                    <td>&nbsp&nbsp&nbsp&nbsp<input type='button' value='注册' id='btn01'/></td>
                    <td>&nbsp&nbsp&nbsp&nbsp<input type='reset' value='重置' /></td>
                </tr>
            </table>
        </form>
    </center>
    </body>
</html>